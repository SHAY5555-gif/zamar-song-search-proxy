services:
  # LangGraph API server (Docker)
  - type: web
    name: deepagents-langgraph
    runtime: docker
    plan: starter
    # Performance Build Pipeline - Faster builds with more CPU/RAM
    # Costs more per minute but reduces total build time by 50-70%
    # Comment out if cost is a concern
    buildPlan: performance
    region: frankfurt
    branch: main
    dockerfilePath: ./Dockerfile
    # Docker image caching - speeds up subsequent builds
    dockerContext: .
    # Auto-deploy on push (disable if you want manual deploys)
    autoDeploy: true
    # Health check configuration - LangGraph typically uses /ok endpoint
    # Change to /health if your API uses that instead
    healthCheckPath: /ok
    # Restart policy
    pullRequestPreviewsEnabled: true
    envVars:
      - key: REDIS_URI
        sync: false
      - key: DATABASE_URI
        sync: false
      - key: ANTHROPIC_API_KEY
        sync: false
      - key: LANGSMITH_API_KEY
        sync: false
      - key: LANGCHAIN_TRACING_V2
        value: "true"
      - key: LANGCHAIN_PROJECT
        value: deepagents
      - key: XAI_API_KEY
        sync: false
      - key: TAVILY_API_KEY
        sync: false
      - key: GOOGLE_API_KEY
        sync: false
      - key: OPENAI_API_KEY
        sync: false
      - key: OPENAI_MODEL
        value: gpt-4
      - key: BROWSERBASE_API_KEY
        sync: false
      - key: BROWSERBASE_PROJECT_ID
        sync: false
      - key: BROWSERBASE_CONTEXT_ID
        sync: false
      - key: BROWSERBASE_REGION
        value: eu-central-1
